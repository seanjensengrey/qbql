-- Relational lattice instance from the Figure 1
-- http://arxiv1.library.cornell.edu/pdf/0807.3795
-- Attributes are renamed: x -> p, y -> q, z -> r, because 
-- elsewhere x, y, and z are relation variables!

A=[p]
   1
;
B=[p]
   1
   2
;
C=[q]
   a
;
D=[q]
   a
   b
;

JAC = A ^ C;

JAD = A ^ D;

JBC = B ^ C;

_A = A ^ R00;

_C = C ^ R00;

ADvBC = (A ^ D) v (B ^ C);

-- Additional relations (beyond the scope of Figure 1)

A0 = [p] 0;
A1 = [p] 2;
A2 = [p] 0 2;
A3 = [p] 0 1;
A4 = [p] 0 1 2;
		
D0 = [q] b;
D1 = [q] c;
D2 = [q] b c;
D3 = [q] a b c;

F =  [r] 0;
F_ = [r];

S=[p  r]
   0  0
   0  1
   1  0
;
S1=[p  r]
    0  0
    1  0
;

S2 = [p r]   -- aka "[p=r]" 
           0 0
           1 1
           2 2
;
  

S3= [p r]   -- aka "[p<r]" 
           0 0
           0 1
           0 2
           1 1
           1 2
           2 2
;
S_ = [p r];

T1 = [q r]
      a 0
;
T2 = [q r]
      b 0
;
T3 = [q r]
      a 0
      b 0
;
T4 = [q r]
      a 0
      b 0
      a 1
;
T5 = [q r]
      a 0
      b 0
      a 1
      b 1
;
T_ = [q r];



--------- User Defined Operations ----------
TABLE_DUM = R00;
TABLE_DEE = R01;

x <AND> y = x ^ y.
x <OR> y = --(x ^ R11) v (y ^ (x v R11)). -- x @+ (y @+ z) = (x @+ y) @+ z. 73 sec
        --(R11 ^ y) v (x ^ y) v (x ^ R11). -- 112 sec
        (x ^ (y v R11)) v (y ^ (x v R11)). -- 43 sec
        --(x' ^ y')'. -- 70 sec
        --((R00 ^ x) ^ y) v (R11 ^ y) v (x ^ R11). -- 113 sec
x <and> y = --(x ^ R00) v (x ^ y) v (R00 ^ y). -- 4.9 sec R00 ^ (x v y) = R00 ^ (y v z) -> x @* (y @* z) = (x @* y) @* z.
         (x ^ y) v ((x v y) ^ R00). -- 4.9 sec (compared with join ^ associativity taking 3.7 sec)

/*
x <FancierJoin> y =  --(y` ^ x`)` ^ (y v x). -- 62
        --(R00 v (x` ^ y)) ^ (y v x).  -- 19
        --(R00 v x) ^ ((y` ^ x) v y). -- 20
        (((R00 v x) ^ y) v R00) ^ (y v x). -- 4.

x @# y = (R11 /= (y /= x))` ^ y.
x @? y = ((y ^ x)' /^ (y v x))` v y. 

x @/< y = ( (x v y)` @* (x ^ y') )'.
x @/> y = ( (x v y)` @* (x'^ y) )'.
*/

<NOT> x  = (R11 v x) ^ x'. 
-- same performance as: ( <NOT> x ) = (R11 v (x^R00)) ^ x'. 
<INV> x  = (R11 ^ x) v x`. 

x <"and"> y = (<NOT>((<NOT>x) v (<NOT>y))).

         